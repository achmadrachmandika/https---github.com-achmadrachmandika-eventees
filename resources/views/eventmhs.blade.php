@extends('layouts2.app')
@section('content')

<!-- Carousel Start -->
<div class="container-fluid p-0 mb-5">
    <div class="owl-carousel header-carousel position-relative">
        <div class="owl-carousel-item position-relative">
            <img class="img-fluid" src="images/event/Edit-32.jpg" alt="">

            <div class="position-absolute top-0 start-0 w-100 h-100 d-flex align-items-center"
                style="background: rgba(24, 29, 56, .7);">
                <div class="container">
                    <div class="row justify-content-start">
                        <div class="col-sm-10 col-lg-8">
                            <h5 class="text-primary text-uppercase mb-3 animated slideInDown">Penyelenggara Event Pelatihan pertama di internal JTI Polinema.</h5>
                            <h1 class="display-3 text-white animated slideInDown">Penyelenggara Event Pelatihan pertama di internal JTI Polinema.</h1>
                            <p class="fs-5 text-white mb-4 pb-2">Penyelenggara Event Pelatihan pertama di internal JTI Polinema.</p>
                            <a href="#events-section" class="btn btn-primary py-md-3 px-md-5 me-3 animated slideInLeft">Ikuti Pelatihan</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="owl-carousel-item position-relative">
            <img class="img-fluid" src="images/event/Edit-2.jpg" alt="">
            <div class="position-absolute top-0 start-0 w-100 h-100 d-flex align-items-center"
                style="background: rgba(24, 29, 56, .7);">
                <div class="container">
                    <div class="row justify-content-start">
                        <div class="col-sm-10 col-lg-8">
                            <h5 class="text-primary text-uppercase mb-3 animated slideInDown">Penyelenggara Event Pelatihan pertama di internal JTI Polinema.</h5>
                            <h1 class="display-3 text-white animated slideInDown">Penyelenggara Event Pelatihan pertama di internal JTI Polinema.
                            </h1>
                            <p class="fs-5 text-white mb-4 pb-2">Penyelenggara Event Pelatihan pertama di internal JTI Polinema.</p>
                            <a href="#events-section" class="btn btn-primary py-md-3 px-md-5 me-3 animated slideInLeft">Ikuti Pelatihan</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Carousel End -->


<!-- Service Start -->
<div class="container-xxl py-5">
    <div class="container">
        <div class="row g-4">
            <div class="col-lg-3 col-sm-6 wow fadeInUp" data-wow-delay="0.1s">
                <div class="service-item text-center pt-3">
                    <div class="p-4">
                        <i class="fa fa-3x fa-graduation-cap text-primary mb-4"></i>
                        <h5 class="mb-3">Instruktur Terampil</h5>
                        <p>Pengajar berpengalaman yang siap membantu Anda belajar dengan efektif dan efisien.</p>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-sm-6 wow fadeInUp" data-wow-delay="0.3s">
                <div class="service-item text-center pt-3">
                    <div class="p-4">
                        <i class="fa fa-3x fa-globe text-primary mb-4"></i>
                        <h5 class="mb-3">Kelas Daring</h5>
                        <p>Belajar dari mana saja dengan akses ke kelas daring yang fleksibel dan interaktif.</p>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-sm-6 wow fadeInUp" data-wow-delay="0.5s">
                <div class="service-item text-center pt-3">
                    <div class="p-4">
                        <i class="fa fa-3x fa-home text-primary mb-4"></i>
                        <h5 class="mb-3">Proyek Rumah</h5>
                        <p>Mengerjakan proyek-proyek praktis dari rumah untuk meningkatkan keterampilan Anda.</p>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-sm-6 wow fadeInUp" data-wow-delay="0.7s">
                <div class="service-item text-center pt-3">
                    <div class="p-4">
                        <i class="fa fa-3x fa-book-open text-primary mb-4"></i>
                        <h5 class="mb-3">Perpustakaan Buku</h5>
                        <p>Akses ke koleksi buku yang lengkap untuk mendukung proses pembelajaran Anda.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Service End -->


<!-- About Start -->
<div class="container-xxl py-5">
    <div class="container">
        <div class="row g-5">
            <div class="col-lg-6 wow fadeInUp" data-wow-delay="0.1s" style="min-height: 400px;">
                <div class="position-relative h-100">
                    <img class="img-fluid position-absolute w-100 h-100" src="images/event/Edit-36.jpg" alt=""
                        style="object-fit: cover;">
                </div>
            </div>
            <div class="col-lg-6 wow fadeInUp" data-wow-delay="0.3s">
                <h6 class="section-title bg-white text-start text-primary pe-3">Tentang Kami</h6>
                <h1 class="mb-4">Selamat Datang di EventeesHUB</h1>
                <p class="mb-4">Penyelenggara pelatihan pertama di JTI Polinema</p>
                <p class="mb-4"></p>
                <div class="row gy-2 gx-4 mb-4">
                    <div class="row gy-2 gx-4 mb-4">
                        <div class="col-sm-6">
                            <p class="mb-0"><i class="fa fa-arrow-right text-primary me-2"></i>Pemateri Berpengalaman</p>
                        </div>
                        <div class="col-sm-6">
                            <p class="mb-0"><i class="fa fa-arrow-right text-primary me-2"></i>Kelas Online</p>
                        </div>
                        <div class="col-sm-6">
                            <p class="mb-0"><i class="fa fa-arrow-right text-primary me-2"></i>Kelas Offline</p>
                        </div>
                        <div class="col-sm-6">
                            <p class="mb-0"><i class="fa fa-arrow-right text-primary me-2"></i>Interaktif</p>
                        </div>
                        <div class="col-sm-6">
                            <p class="mb-0"><i class="fa fa-arrow-right text-primary me-2"></i>Sertifikat</p>
                        </div>
                </div>
                <a class="btn btn-primary py-3 px-5 mt-2" href="/about">Read More</a>
            </div>
        </div>
    </div>
</div>
<!-- About End -->
    

<!-- Courses Start -->
<div class="container-xxl py-5" id="events-section">
    <div class="container">
        <div class="text-center wow fadeInUp" data-wow-delay="0.1s">
            <h6 class="section-title bg-white text-center text-primary px-3">Event Pelatihan</h6>
            <h1 class="mb-5">Akan diselenggarakan</h1>
        </div>
        @if (Auth::check() && Auth::user()->hasRole('mahasiswa'))
        <div class="row g-4 justify-content-center">
            @if (session('error'))
            <div class="alert alert-danger">
                {{ session('error') }}
            </div>
            @endif

            @if ($events->isEmpty())
            <div class="col-12">
                <div class="alert alert-warning text-center">
                    <strong>Tidak ada event yang tersedia saat ini.</strong>
                </div>
            </div>
            @else
            @foreach ($events as $event)
            @if ($event->kuota > 0)
            <div class="row g-4 justify-content-center">
                <div class="col-lg-4 col-md-6 wow fadeInUp" data-wow-delay="0.1s">
                    <div class="course-item bg-light">
                        <div class="position-relative overflow-hidden">
                            <img class="img-fluid" src="{{ asset('storage/' . $event->photo) }}" alt="">
                            <div class="w-100 d-flex justify-content-center position-absolute bottom-0 start-0 mb-4">
                                <a href="{{ route('eventhub.show', ['kode_event' => $event->kode_event]) }}"
                                    class="flex-shrink-0 btn btn-sm btn-primary px-3 border-end" style="border-radius: 30px 0 0 30px;">
                                    Ikut Pelatihan
                                </a>
                            </div>
                        </div>
                        <div class="text-center p-4 pb-0">
                            <h3 class="mb-0">Rp.{{ $event->harga }}</h3>
                            <div class="mb-3">
                                <small class="fa fa-star text-primary"></small>
                                <small class="fa fa-star text-primary"></small>
                                <small class="fa fa-star text-primary"></small>
                                <small class="fa fa-star text-primary"></small>
                                <small class="fa fa-star text-primary"></small>
                                <small>(123)</small>
                            </div>
                            <h5 class="mb-4">{{ $event->nama_event }}</h5>
                        </div>
                        <div class="d-flex border-top">
                            <small class="flex-fill text-center border-end py-2"><i
                                    class="fa fa-user-tie text-primary me-2"></i>{{ $event->kode_dosen }}</small>
                            <small class="flex-fill text-center border-end py-2"><i class="fa fa-clock text-primary me-2"></i>{{
                            \Carbon\Carbon::parse($event->jam)->format('H:i:s') }}</small>
                            <small class="flex-fill text-center py-2"><i class="fa fa-user text-primary me-2"></i>{{ $event->kuota }} Peserta</small>
                        </div>
                    </div>
                </div>
            
            </div>
            @endif
            @endforeach
            @endif
        </div>
        @else
        <!-- Jika tidak memiliki role mahasiswa, tambahkan konten alternatif di sini -->
        @endif
    </div>
</div>
<!-- Courses End -->


<!-- Team Start -->
{{-- <div class="container-xxl py-5">
    <div class="container">
        <div class="text-center wow fadeInUp" data-wow-delay="0.1s">
            <h6 class="section-title bg-white text-center text-primary px-3">Instructors</h6>
            <h1 class="mb-5">Expert Instructors</h1>
        </div>
        <div class="row g-4">
            <div class="col-lg-3 col-md-6 wow fadeInUp" data-wow-delay="0.1s">
                <div class="team-item bg-light">
                    <div class="overflow-hidden">
                        <img class="img-fluid" src="img/team-1.jpg" alt="">
                    </div>
                    <div class="position-relative d-flex justify-content-center" style="margin-top: -23px;">
                        <div class="bg-light d-flex justify-content-center pt-2 px-1">
                            <a class="btn btn-sm-square btn-primary mx-1" href=""><i class="fab fa-facebook-f"></i></a>
                            <a class="btn btn-sm-square btn-primary mx-1" href=""><i class="fab fa-twitter"></i></a>
                            <a class="btn btn-sm-square btn-primary mx-1" href=""><i class="fab fa-instagram"></i></a>
                        </div>
                    </div>
                    <div class="text-center p-4">
                        <h5 class="mb-0">Instructor Name</h5>
                        <small>Designation</small>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 wow fadeInUp" data-wow-delay="0.3s">
                <div class="team-item bg-light">
                    <div class="overflow-hidden">
                        <img class="img-fluid" src="img/team-2.jpg" alt="">
                    </div>
                    <div class="position-relative d-flex justify-content-center" style="margin-top: -23px;">
                        <div class="bg-light d-flex justify-content-center pt-2 px-1">
                            <a class="btn btn-sm-square btn-primary mx-1" href=""><i class="fab fa-facebook-f"></i></a>
                            <a class="btn btn-sm-square btn-primary mx-1" href=""><i class="fab fa-twitter"></i></a>
                            <a class="btn btn-sm-square btn-primary mx-1" href=""><i class="fab fa-instagram"></i></a>
                        </div>
                    </div>
                    <div class="text-center p-4">
                        <h5 class="mb-0">Instructor Name</h5>
                        <small>Designation</small>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 wow fadeInUp" data-wow-delay="0.5s">
                <div class="team-item bg-light">
                    <div class="overflow-hidden">
                        <img class="img-fluid" src="img/team-3.jpg" alt="">
                    </div>
                    <div class="position-relative d-flex justify-content-center" style="margin-top: -23px;">
                        <div class="bg-light d-flex justify-content-center pt-2 px-1">
                            <a class="btn btn-sm-square btn-primary mx-1" href=""><i class="fab fa-facebook-f"></i></a>
                            <a class="btn btn-sm-square btn-primary mx-1" href=""><i class="fab fa-twitter"></i></a>
                            <a class="btn btn-sm-square btn-primary mx-1" href=""><i class="fab fa-instagram"></i></a>
                        </div>
                    </div>
                    <div class="text-center p-4">
                        <h5 class="mb-0">Instructor Name</h5>
                        <small>Designation</small>
                    </div>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 wow fadeInUp" data-wow-delay="0.7s">
                <div class="team-item bg-light">
                    <div class="overflow-hidden">
                        <img class="img-fluid" src="img/team-4.jpg" alt="">
                    </div>
                    <div class="position-relative d-flex justify-content-center" style="margin-top: -23px;">
                        <div class="bg-light d-flex justify-content-center pt-2 px-1">
                            <a class="btn btn-sm-square btn-primary mx-1" href=""><i class="fab fa-facebook-f"></i></a>
                            <a class="btn btn-sm-square btn-primary mx-1" href=""><i class="fab fa-twitter"></i></a>
                            <a class="btn btn-sm-square btn-primary mx-1" href=""><i class="fab fa-instagram"></i></a>
                        </div>
                    </div>
                    <div class="text-center p-4">
                        <h5 class="mb-0">Instructor Name</h5>
                        <small>Designation</small>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div> --}}
<!-- Team End -->

<section class="feedback-section py-5">
    <div class="container">
        <div class="text-center wow fadeInUp" data-wow-delay="0.1s">
            <h3 class="section-title bg-white text-center text-primary px-3">Berikan kami masukan, Agar kami dapat berkembang
                disetiap momentnya</h6>
        
        </div>
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="card shadow p-4">                    
                    <h3 class="mb-4 text-center">Kritik dan Saran</h3>

                    @if(session('success'))
                    <div class="alert alert-success">{{ session('success') }}</div>
                    @endif

                    @if(Auth::check())
                    <form id="feedback-form" action="{{ route('feedback.store') }}" method="POST">
                        @csrf
                        <div class="form-group mb-3">
                            <label for="name" class="form-label">Nama Anda</label>
                            <input type="text" class="form-control" name="name" id="name" required
                                value="{{ Auth::user()->name }}" readonly>
                        </div>
                        <div class="form-group mb-3">
                            <label for="email" class="form-label">Email Anda</label>
                            <input type="email" class="form-control" name="email" id="email" required
                                value="{{ Auth::user()->email }}" readonly>
                        </div>
                        <div class="form-group mb-4">
                            <label for="message" class="form-label">Pesan</label>
                            <textarea name="message" id="message" cols="30" rows="4" class="form-control"
                                placeholder="Tulis pesan Anda di sini..." required></textarea>
                        </div>
                        <div class="form-group text-center">
                            <input type="submit" value="Kirim Pesan" class="btn btn-primary py-2 px-4">
                        </div>
                    </form>
                    @else
                    <p class="text-center">Anda harus <a href="{{ route('login') }}">login</a> untuk memberikan kritik
                        dan saran.</p>
                    @endif
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Testimonial Start -->
<div class="container-xxl py-5 wow fadeInUp" data-wow-delay="0.1s">
    <div class="container">
        <div class="text-center">
            <h6 class="section-title bg-white text-center text-primary px-3">Testimonial</h6>
            <h1 class="mb-5">Feedback</h1>
        </div>
        <div class="owl-carousel testimonial-carousel position-relative">
            @foreach($feedbacks as $feedback)
            <div class="testimonial-item text-center">
                <img class="border rounded-circle p-2 mx-auto mb-3" src="img1/profil.png"
                    style="width: 80px; height: 80px;">
                <h5 class="mb-0">{{ $feedback->name }}</h5>
                <p>{{ $feedback->email }}</p> <!-- Assuming email is the profession or designation -->
                <div class="testimonial-text bg-light text-center p-4">
                    <p class="mb-0">{{ $feedback->message }}</p>
                </div>
            </div>
            @endforeach
        </div>
    </div>
</div>
<!-- Testimonial End -->

@endsection

@section('script')
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous">
</script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script>
    $(document).ready(function() {
        $('#alert-login').click(function() {
            Swal.fire({
                icon: 'error',
                title: 'Oops...',
                text: 'You must login first!',
                footer: '<a href="/login">Login</a>'
            });
        });

        $(window).on('scroll', function() {
            var scrollPos = $(document).scrollTop();
            $('.nav-link').each(function() {
                var currLink = $(this);
                var refElement = $(currLink.attr('href'));
                if (refElement.position().top <= scrollPos && refElement.position().top + refElement.height() > scrollPos) {
                    $('.nav-link').removeClass('active');
                    currLink.addClass('active');
                } else {
                    currLink.removeClass('active');
                }
            });
        });
    });

    function handleCardClick(url, isLoggedIn) {
        if (isLoggedIn) {
            window.location.href = url;
        } else {
            $('#loginModal').modal('show');
        }
    }

    document.getElementById('feedback-form').addEventListener('submit', function(event) {
        event.preventDefault();
        @if(!Auth::check())
            alert('Anda harus login terlebih dahulu untuk mengirim kritik dan saran.');
            window.location.href = "{{ route('login') }}";
        @else
            this.submit(); // Proceed with form submission
        @endif
    });
</script>
@endsection